function getNormalizedCoord(e,a){var o=e.y,r=e.x,t=1<<a
return o<0||o>=t?null:((r<0||r>=t)&&(r=(r%t+t)%t),{x:r,y:o})}function mapInit(e){_MAP_markerStore=[]
var a=convertToMapGMAP(315.7072466019408,1701.7513644599276),o=[]
_MAP_atlasMap&&o.push("Atlas"),_MAP_satelliteMap&&o.push("Satellite"),_MAP_roadMap&&o.push("Road"),_MAP_UVInvMap&&o.push("UV Invert")
var r={backgroundColor:"#0fa8d2",minZoom:3,maxZoom:7,isPng:!0,mapTypeControl:!0,streetViewControl:!1,center:a,zoom:4,mapTypeControlOptions:{mapTypeIds:o}}
map=new google.maps.Map(document.getElementById(e),r),_MAP_atlasMap&&map.mapTypes.set("Atlas",mapAtlas),_MAP_satelliteMap&&map.mapTypes.set("Satellite",mapSatellite),_MAP_roadMap&&map.mapTypes.set("Road",mapRoad),_MAP_UVInvMap&&map.mapTypes.set("UV Invert",mapUVInv),map.setMapTypeId("Atlas"),google.maps.event.addListener(map,"maptypeid_changed",function(){switch(map.getMapTypeId()){case"Atlas":$("#"+e).css({"background-color":"#0fa8d2"})
break
case"Satellite":$("#"+e).css({"background-color":"#143d6b"})
break
case"Road":$("#"+e).css({"background-color":"#1862ad"})
break
case"UV Invert":$("#"+e).css({"background-color":"#f2f0b6"})}})}function createMarker(e,a,o,r){if(""!=r){var t=r.split(" - ")
if(t.length>=4){var i=t[1].split(" "),n=i[0].replace("X{",""),s=n.replace("}",""),l=i[1].replace("Y{",""),p=l.replace("}",""),m=i[2].replace("Z{",""),d=m.replace("}","")
o.position=new Coordinates(s,p,d)
var c=t[2].replace(/\s+/g,""),g=c.replace("Hash:","")
o.hash=g
var v=t[3].replace(/\s+/g,""),_=v.replace("ModelName:","")
o.modelname=_}}var M=o.reference
"@DEBUG@@Locator"==M&&(M="@Locator"),o.position=stringCoordToFloat(o.position)
var u=convertToMapGMAP(o.position.x,o.position.y),k=o.type,A='<div class="row info-body-row"><strong>Position:</strong>&nbsp;X {'+o.position.x.toFixed(4)+"} Y {"+o.position.y.toFixed(4)+"} Z {"+o.position.z.toFixed(4)+"}</div>"
""!=o.hash&&(A+='<div class="row info-body-row"><strong>Hash:</strong>&nbsp;'+o.hash+"</div>"),""!=o.modelname&&(A+='<div class="row info-body-row"><strong>Model Name:</strong>&nbsp;'+o.modelname+"</div>"),""!=o.description&&(A+='<div class="row info-body-row"><strong>Description:</strong>&nbsp;'+o.description+"</div>")
var w='<div class="info-window"><div class="info-header-box"><div class="info-header">'+M+'</div></div><div class="clear"></div><div id=info-body>'+A+"</div></div>",y=new google.maps.InfoWindow({content:w}),P={url:_MAP_iconURL+k.icon,size:k.size,origin:k.origin,scaledSize:void 0==k.scaledSize?k.size:k.scaledSize,anchor:k.anchor},h=new google.maps.Marker({id:_MAP_markerStore.length,type:k.name,position:u,icon:P,map:map,popup:y,object:o,draggable:!!a,animation:e?google.maps.Animation.DROP:0})
return google.maps.event.addListener(h,"click",function(){_MAP_currentMarker&&_MAP_currentMarker.popup.close(),_MAP_currentMarker=h,h.popup.open(map,this)}),google.maps.event.addListener(h,"drag",function(){var e=convertToGame(h.position.lat(),h.position.lng())
o.position.x=e.x,o.position.y=e.y,"@DEBUG@@Locator"==o.reference&&($("#locator_x").val(e.x),$("#locator_y").val(e.y))}),"@DEBUG@@Locator"==M?$("#marker-list").append('<div id="marker_'+h.id+'" data-id="'+h.id+'" class="marker-item"><div class="marker-desc"><span class="marker_name">@Locator</span></div><div class="marker-options"><a href="#" class="marker_view" title="View"><img src="images/icons/view.png" alt="View" height="16" width="16" /></a> </div></div><div class="clear"></div>'):$("#marker-list").append('<div id="marker_'+h.id+'" data-id="'+h.id+'" class="marker-item"><div class="marker-desc"><span class="marker_name">'+M+'</span></div><div class="marker-options"><a href="#" class="marker_view" title="View"><img src="images/icons/view.png" alt="View" height="16" width="16" /></a> / <a href="#" class="marker_delete" title="Delete"><img src="images/icons/delete.png" alt="Delete" height="16" width="16" /></a></div></div><div class="clear"></div>'),_MAP_markerStore.push(h),_MAP_markerStore.length}function setMapCenter(e,a){map.setCenter(new google.maps.LatLng(e,a)),map.setZoom(6)}function setMapCenterGMAP(e){map.setCenter(e),map.setZoom(6)}function clearAllMarkers(){for(var e=0;e<_MAP_markerStore.length;e++)"NULL"!=_MAP_markerStore[e]&&_MAP_markerStore[e].setMap(null)
_MAP_markerStore.length=0
for(var a in localCache){var o=localCache[a].player
createMarker(!1,!1,new MarkerObject(o.name,new Coordinates(o.x,o.y,o.z),MarkerTypes.normal,"A player","",""),o.name),localCache[o.id].marker=_MAP_markerStore.length-1}}function clearMarker(e){"NULL"!=_MAP_markerStore[e]&&(_MAP_markerStore[e].setMap(null),_MAP_markerStore[e]="NULL",$("#marker_"+e).remove())}function getMarker(e){if("NULL"!=_MAP_markerStore[e])return _MAP_markerStore[e]}var _MAP_currentMarker,_MAP_markerStore,bounds={3:2,4:5,5:10,6:21,7:42},mapAtlasOptions={getTileUrl:function(e,a){var o=getNormalizedCoord(e,a)
return!o||o.x>bounds[a]||o.y>bounds[a]?null:_MAP_tileURL+"atlas/"+a+"_"+o.x+"_"+o.y+".png"},tileSize:new google.maps.Size(256,256),maxZoom:7,name:"Atlas",alt:"GTA V Atlas Map"},mapAtlas=new google.maps.ImageMapType(mapAtlasOptions)
mapAtlas.projection=new EuclideanProjection
var mapSatelliteOptions={getTileUrl:function(e,a){var o=getNormalizedCoord(e,a)
return!o||o.x>bounds[a]||o.y>bounds[a]?null:_MAP_tileURL+"satellite/"+a+"_"+o.x+"_"+o.y+".png"},tileSize:new google.maps.Size(256,256),maxZoom:7,name:"Satellite",alt:"GTA V Satellite Map"},mapSatellite=new google.maps.ImageMapType(mapSatelliteOptions)
mapSatellite.projection=new EuclideanProjection
var mapRoadOptions={getTileUrl:function(e,a){var o=getNormalizedCoord(e,a)
return!o||o.x>bounds[a]||o.y>bounds[a]?null:_MAP_tileURL+"road/"+a+"_"+o.x+"_"+o.y+".png"},tileSize:new google.maps.Size(256,256),maxZoom:7,name:"Road",alt:"GTA V Road Map"},mapRoad=new google.maps.ImageMapType(mapRoadOptions)
mapRoad.projection=new EuclideanProjection
var mapUVInvOptions={getTileUrl:function(e,a){var o=getNormalizedCoord(e,a)
return!o||o.x>bounds[a]||o.y>bounds[a]?null:_MAP_tileURL+"uv-invert/"+a+"_"+o.x+"_"+o.y+".png"},tileSize:new google.maps.Size(256,256),maxZoom:7,name:"UV Invert",alt:"GTA V UV Invert Map"},mapUVInv=new google.maps.ImageMapType(mapUVInvOptions)
mapUVInv.projection=new EuclideanProjection
