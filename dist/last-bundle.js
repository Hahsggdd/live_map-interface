function toggleBlips(){if(console._log("showing local blips"),_showBlips)for(var e in _blips){var a=_blips[e];if(-1==_disabledBlips.indexOf(e))for(var r in a){var s=a[r],t=new MarkerObject(s.name,new Coordinates(s.pos.x,s.pos.y,s.pos.z),MarkerTypes[s.type],s.description,"","");s.markerId=createMarker(!1,!1,t,"")-1}else _SETTINGS_debug&&console._log("Blip "+e+"'s are disabled..")}else clearAllMarkers()}function initControls(e,a){a.on("clusterclick",function(a){for(var r=L.DomUtil.create("ul"),s=a.layer.getAllChildMarkers(),t=0;t<s.length;t++){var o=s[t].options,l=o.title,n=L.DomUtil.create("li","clusteredPlayerMarker");n.setAttribute("data-identifier",o.player.identifer),n.appendChild(document.createTextNode(l)),r.appendChild(n)}L.DomEvent.on(r,"click",function(a){var r=a.target.getAttribute("data-identifier"),s=MarkerStore[localCache[r].marker];e.closePopup(e._popup),e.openPopup(s.getPopup())}),e.openPopup(r,a.layer.getLatLng())}),e.on("baselayerchange",function(r){var s=getMapBounds(r.layer);e.setMaxBounds(s),e.fitBounds(s),CurrentLayer=r.layer,e.removeLayer(a),window.PlayerMarkers=L.markerClusterGroup({maxClusterRadius:20,spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,zoomToBoundsOnClick:!1}),e.addLayer(a),clearAllMarkers(),toggleBlips()})}$(document).ready(function(){globalInit(),$("#playerSelect").on("change",function(){""!=this.value?(Map.setZoom(3),_trackPlayer=this.value):_trackPlayer=null}),$("#refreshBlips").click(function(e){e.preventDefault(),_showBlips&&(clearAllMarkers(),initBlips())}),$("#server_menu").on("click",".serverMenuItem",function(e){console._log($(this).text()),changeServer($(this).text())}),$("#showBlips").click(function(e){e.preventDefault(),_showBlips=!_showBlips,toggleBlips(),$("#blips_enabled").removeClass("badge-success").removeClass("badge-danger").addClass(_showBlips?"badge-success":"badge-danger").text(_showBlips?"on":"off")}),$("#reconnect").click(function(e){e.preventDefault(),$("#connection").removeClass("badge-success").removeClass("badge-danger").addClass("badge-warning").text("reconnecting"),null==webSocket&&null==webSocket||webSocket.close(),connect()}),$("#toggle-all-blips").on("click",function(){$("#blip-control-container").find("a").each(function(e,a){var r=(a=$(a)).data("blipNumber").toString();_disabledBlips.includes(r)?(_disabledBlips.splice(_disabledBlips.indexOf(r),1),a.removeClass("blip-disabled").addClass("blip-enabled")):(_disabledBlips.push(r),a.removeClass("blip-enabled").addClass("blip-disabled"))}),clearAllMarkers(),toggleBlips()})}),$(document).ready(function(){$.ajax("version.json",{error:function(e,a){createAlert({title:"<strong>Error getting version.json!</strong>",message:e.statusText})},dataType:"text",success:function(e,a){var r=stripJsonOfComments(e),s=JSON.parse(r);window.version=s.interface,$("#livemap_version").text(window.version),$.ajax("//raw.githubusercontent.com/TGRHavoc/live_map-interface/master/version.json",{error:function(e,a){createAlert({title:"<strong>Error latest version for check!</strong>",message:e.statusText})},dataType:"text",success:function(e,a){var r=stripJsonOfComments(e),s=JSON.parse(r);window.compareVersions(window.version,s.interface)<0?createAlert({title:"Update available",message:`An update is available (${window.version} -> ${s.interface}). Please download it <a style='color: #000;' href='https://github.com/TGRHavoc/live_map-interface'>HERE.</a>`}):console._log("Up to date or, a higher version")}})}})});